# Тестовое задание для VK

## Описание проекта

Ботоферма — это микросервис на Python, использующий FastAPI, который позволяет управлять пользователями для выполнения E2E-тестов в веб-приложениях. Сервис предоставляет RESTful API для создания, получения, обновления, удаления и управления блокировкой пользователей.

## Настройка окружения

Для работы с сервисом требуется Docker и Docker Compose. Также необходимо установить зависимости Python, описанные в файле `requirements.txt`.

## Как начать использование

**Настройка переменных окружения:**

Создайте файл `.env` в корне проекта со следующим содержимым:

```
DB_USER=user
DB_PASSWORD=password
DB_NAME=botofarmdb
DB_HOST=db
```

Эти значения будут использованы для конфигурации доступа к базе данных.

**Запуск сервиса с помощью Docker Compose:**

```bash
docker-compose up --build
```

Эта команда соберет образы Docker и запустит контейнеры `db` и `web`.

**Инициализация и применение миграций базы данных:**
    
Миграции применяются автоматически после сборки контейнера.
Если необходимо инициализировать или применить миграции, можно воспользоваться следующими командами внутри контейнера:

```bash
docker exec -it <web_container_id> bash
alembic upgrade head
```

## Использование API

Сервис предоставляет следующие endpoint'ы для работы с пользователями:

- `POST /users/`: Создание нового пользователя.
- `GET /users/{user_id}`: Получение информации о пользователе по ID.
- `PUT /users/{user_id}`: Обновление информации пользователя по ID.
- `DELETE /users/{user_id}`: Удаление пользователя по ID.
- `POST /users/{user_id}/lock`: Блокировка пользователя.
- `POST /users/{user_id}/unlock`: Разблокировка пользователя.

Доступ к этим endpoint'ам можно получить через интерфейс Swagger, который доступен по URL: `http://localhost:8000/docs`.

## Тестирование

Тестирование запускается автоматически перед сборкой контейнера.
